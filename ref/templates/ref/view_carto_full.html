{% extends "base.html" %}
{% load staticfiles %}
{% load folder_crumbs from filter %}

{% block pagetitle %}Carte des environnements{% endblock %}
{% block maintitle %}{% if scope_id %}{{ scope_id | folder_crumbs }} : {% endif %}Carte compl√®te{% endblock %}
{% block scripts %}
<script type="text/javascript" src='{% static "d3.min.js" %}'></script>
<script type="text/javascript" src='{% static "dagre-d3.min.js" %}'></script>
<script type="text/javascript" src='{% static "jquery-1.11.2.min.js" %}'></script>
<script type="text/javascript">
$(document).ready(function()
{
	$.ajax(
	{
        {%  if scope_id %}
		url : '{% url "ref:cartoscopedata" scope_id "3" %}',
        {%  else %}
        url : '{% url "ref:cartofulldata" "3" %}',
        {% endif %}
		type : "GET",
		dataType : "json",
	}).done(function(json)
	{
		digraph = dagreD3.json.decode(json['nodes'], json['edges']);
		var renderer = new dagreD3.Renderer();
		renderer.run(digraph, d3.select("svg g"));
	});
});
</script>
{% endblock scripts %}

{% block content %}

<svg width=5024 height=5024>
    <g transform="translate(20,20) scale(0.7)"/>
</svg>

{% endblock content %}
